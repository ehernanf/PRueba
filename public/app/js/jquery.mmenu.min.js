(function(e){var d="mmenu",m="4.2.7";if(e[d]){return}var l={$wndw:null,$html:null,$body:null,$page:null,$blck:null,$allMenus:null};var k={},i={},g={},n=0,b=0;e[d]=function(p,q,o){l.$allMenus=l.$allMenus.add(p);this.$menu=p;this.opts=q;this.conf=o;this.opened=false;this.serialnr=n++;this._init();return this};e[d].prototype={open:function(){if(this.opened){return false}var o=this;this._openSetup();setTimeout(function(){o._openFinish()},50);return"open"},_openSetup:function(){b=l.$wndw.scrollTop()||0;this.$menu.addClass(k.current);l.$allMenus.not(this.$menu).trigger(g.close);l.$page.data(i.style,l.$page.attr("style")||"");l.$wndw.trigger(g.resize,[true]);if(this.opts.modal){l.$html.addClass(k.modal)}if(this.opts.moveBackground){l.$html.addClass(k.background)}if(this.opts.position!="left"){l.$html.addClass(k.mm(this.opts.position))}if(this.opts.zposition!="back"){l.$html.addClass(k.mm(this.opts.zposition))}if(this.opts.classes){l.$html.addClass(this.opts.classes)}l.$html.addClass(k.opened);this.$menu.addClass(k.opened)},_openFinish:function(){var o=this;a(l.$page,function(){o.opened=true;o.$menu.trigger(g.opened)},this.conf.transitionDuration);l.$html.addClass(k.opening);this.$menu.trigger(g.opening)},close:function(){var o=this;if(!this.opened){return false}a(l.$page,function(){o.$menu.removeClass(k.current).removeClass(k.opened);l.$html.removeClass(k.opened).removeClass(k.modal).removeClass(k.background).removeClass(k.mm(o.opts.position)).removeClass(k.mm(o.opts.zposition));if(o.opts.classes){l.$html.removeClass(o.opts.classes)}l.$page.attr("style",l.$page.data(i.style));o.opened=false;o.$menu.trigger(g.closed)},this.conf.transitionDuration);l.$html.removeClass(k.opening);this.$menu.trigger(g.closing);return"close"},_init:function(){this.opts=c(this.opts,this.conf,this.$menu);this.direction=(this.opts.slidingSubmenus)?"horizontal":"vertical";this._initPage(l.$page);this._initMenu();this._initBlocker();this._initPanles();this._initLinks();this._initOpenClose();this._bindCustomEvents();if(e[d].addons){for(var o=0;o<e[d].addons.length;o++){if(typeof this["_addon_"+e[d].addons[o]]=="function"){this["_addon_"+e[d].addons[o]]()}}}},_bindCustomEvents:function(){var p=this;this.$menu.off(g.open+" "+g.close+" "+g.setPage+" "+g.update).on(g.open+" "+g.close+" "+g.setPage+" "+g.update,function(q){q.stopPropagation()});this.$menu.on(g.open,function(q){if(e(this).hasClass(k.current)){q.stopImmediatePropagation();return false}return p.open()}).on(g.close,function(q){if(!e(this).hasClass(k.current)){q.stopImmediatePropagation();return false}return p.close()}).on(g.setPage,function(r,q){p._initPage(q);p._initOpenClose()});var o=this.$menu.find(this.opts.isMenu&&this.direction!="horizontal"?"ul, ol":"."+k.panel);o.off(g.toggle+" "+g.open+" "+g.close).on(g.toggle+" "+g.open+" "+g.close,function(q){q.stopPropagation()});if(this.direction=="horizontal"){o.on(g.open,function(q){return f(e(this),p.$menu)})}else{o.on(g.toggle,function(q){var r=e(this);return r.triggerHandler(r.parent().hasClass(k.opened)?g.close:g.open)}).on(g.open,function(q){e(this).parent().addClass(k.opened);return"open"}).on(g.close,function(q){e(this).parent().removeClass(k.opened);return"close"})}},_initBlocker:function(){var o=this;if(!l.$blck){l.$blck=e('<div id="'+k.blocker+'" />').appendTo(l.$body)}l.$blck.off(g.touchstart).on(g.touchstart,function(p){p.preventDefault();p.stopPropagation();l.$blck.trigger(g.mousedown)}).on(g.mousedown,function(p){p.preventDefault();if(!l.$html.hasClass(k.modal)){o.$menu.trigger(g.close)}})},_initPage:function(o){if(!o){o=e(this.conf.pageSelector,l.$body);if(o.length>1){e[d].debug("Multiple nodes found for the page-node, all nodes are wrapped in one <"+this.conf.pageNodetype+">.");o=o.wrapAll("<"+this.conf.pageNodetype+" />").parent()}}o.addClass(k.page);l.$page=o},_initMenu:function(){var o=this;if(this.conf.clone){this.$menu=this.$menu.clone(true);this.$menu.add(this.$menu.find("*")).filter("[id]").each(function(){e(this).attr("id",k.mm(e(this).attr("id")))})}this.$menu.contents().each(function(){if(e(this)[0].nodeType==3){e(this).remove()}});this.$menu[this.conf.menuInjectMethod+"To"](this.conf.menuWrapperSelector).addClass(k.menu);this.$menu.addClass(k.mm(this.direction));if(this.opts.classes){this.$menu.addClass(this.opts.classes)}if(this.opts.isMenu){this.$menu.addClass(k.ismenu)}if(this.opts.position!="left"){this.$menu.addClass(k.mm(this.opts.position))}if(this.opts.zposition!="back"){this.$menu.addClass(k.mm(this.opts.zposition))}},_initPanles:function(){var t=this;this.__refactorClass(e("."+this.conf.listClass,this.$menu),"list");if(this.opts.isMenu){e("ul, ol",this.$menu).not(".mm-nolist").addClass(k.list)}var r=e("."+k.list+" > li",this.$menu);this.__refactorClass(r.filter("."+this.conf.selectedClass),"selected");this.__refactorClass(r.filter("."+this.conf.labelClass),"label");this.__refactorClass(r.filter("."+this.conf.spacerClass),"spacer");r.off(g.setSelected).on(g.setSelected,function(v,u){v.stopPropagation();r.removeClass(k.selected);if(typeof u!="boolean"){u=true}if(u){e(this).addClass(k.selected)}});this.__refactorClass(e("."+this.conf.panelClass,this.$menu),"panel");this.$menu.children().filter(this.conf.panelNodetype).add(this.$menu.find("."+k.list).children().children().filter(this.conf.panelNodetype)).addClass(k.panel);var s=e("."+k.panel,this.$menu);s.each(function(u){var w=e(this),v=w.attr("id")||k.mm("m"+t.serialnr+"-p"+u);w.attr("id",v)});s.find("."+k.panel).each(function(v){var z=e(this),y=z.is("ul, ol, a")?z:z.find("ul ,ol, a").first(),x=z.parent(),w=x.find("> a, > span"),u=x.closest("."+k.panel);z.data(i.parent,x);if(x.parent().is("."+k.list)){w.addClass(k.subopen);w.attr({href:"#"+z.attr("id")})}});var o=this.direction=="horizontal"?g.open:g.toggle;s.each(function(u){var v=e(this),w=v.attr("id");e('a[href="#'+w+'"]',t.$menu).off(g.click).on(g.click,function(x){x.preventDefault();v.trigger(o)})});if(this.direction=="horizontal"){var p=e("."+k.list+" > li."+k.selected,this.$menu);p.parents("li").removeClass(k.selected).end().add(p.parents("li")).each(function(){var v=e(this),u=v.find("> ."+k.panel);if(u.length){v.parents("."+k.panel).addClass(k.subopened);u.addClass(k.opened)}}).closest("."+k.panel).addClass(k.opened).parents("."+k.panel).addClass(k.subopened)}else{var p=e("li."+k.selected,this.$menu);p.parents("li").removeClass(k.selected).end().add(p.parents("li")).addClass(k.opened)}var q=s.filter("."+k.opened);if(!q.length){q=s.first()}q.addClass(k.opened).last().addClass(k.current);if(this.direction=="horizontal"){s.find("."+k.panel).appendTo(this.$menu)}},_initLinks:function(){var o=this;e("."+k.list+" > li > a",this.$menu).not("."+k.subopen).not("."+k.subclose).not('[rel="external"]').not('[target="_blank"]').off(g.click).on(g.click,function(r){var s=e(this),p=s.attr("href");if(o.__valueOrFn(o.opts.onClick.setSelected,s)){s.parent().trigger(g.setSelected)}var q=o.__valueOrFn(o.opts.onClick.preventDefault,s,p.slice(0,1)=="#");if(q){r.preventDefault()}if(o.__valueOrFn(o.opts.onClick.blockUI,s,!q)){l.$html.addClass(k.blocking)}if(o.__valueOrFn(o.opts.onClick.close,s,q)){o.$menu.triggerHandler(g.close)}})},_initOpenClose:function(){var o=this;var p=this.$menu.attr("id");if(p&&p.length){if(this.conf.clone){p=k.umm(p)}e('a[href="#'+p+'"]').off(g.click).on(g.click,function(q){q.preventDefault();o.$menu.trigger(g.open)})}var p=l.$page.attr("id");if(p&&p.length){e('a[href="#'+p+'"]').on(g.click,function(q){q.preventDefault();o.$menu.trigger(g.close)})}},__valueOrFn:function(r,p,q){if(typeof r=="function"){return r.call(p[0])}if(typeof r=="undefined"&&typeof q!="undefined"){return q}return r},__refactorClass:function(o,p){o.removeClass(this.conf[p+"Class"]).addClass(k[p])}};e.fn[d]=function(p,o){if(!l.$wndw){h()}p=c(p,o);o=j(o);return this.each(function(){var q=e(this);if(q.data(d)){return}q.data(d,new e[d](q,p,o))})};e[d].version=m;e[d].defaults={position:"left",zposition:"back",moveBackground:true,slidingSubmenus:true,modal:false,classes:"",onClick:{setSelected:true}};e[d].configuration={panelClass:"Panel",listClass:"List",selectedClass:"Selected",labelClass:"Label",spacerClass:"Spacer",pageNodetype:"div",panelNodetype:"ul, ol, div",pageSelector:null,menuWrapperSelector:"body",menuInjectMethod:"prepend",transitionDuration:400};(function(){var r=window.document,p=window.navigator.userAgent,s=document.createElement("div").style;var q="ontouchstart" in r,t="WebkitOverflowScrolling" in r.documentElement.style,o=(function(){if(p.indexOf("Android")>=0){return 2.4>parseFloat(p.slice(p.indexOf("Android")+8))}return false})();e[d].support={touch:q,oldAndroidBrowser:o,overflowscrolling:(function(){if(!q){return true}if(t){return true}if(o){return false}return true})()}})();e[d].debug=function(o){};e[d].deprecated=function(p,o){if(typeof console!="undefined"&&typeof console.warn!="undefined"){console.warn("MMENU: "+p+" is deprecated, use "+o+" instead.")}};function c(r,s,q){if(q){if(typeof r!="object"){r={}}if(typeof r.isMenu!="boolean"){var p=q.children();r.isMenu=(p.length==1&&p.is(s.panelNodetype))}return r}r=e.extend(true,{},e[d].defaults,r);if(r.position=="top"||r.position=="bottom"){if(r.zposition=="back"||r.zposition=="next"){e[d].deprecated('Using position "'+r.position+'" in combination with zposition "'+r.zposition+'"','zposition "front"');r.zposition="front"}}return r}function j(o){o=e.extend(true,{},e[d].configuration,o);if(typeof o.pageSelector!="string"){o.pageSelector="> "+o.pageNodetype}if(o.menuInjectMethod!="append"){o.menuInjectMethod="prepend"}return o}function h(){l.$wndw=e(window);l.$html=e("html");l.$body=e("body");l.$allMenus=e();e.each([k,i,g],function(p,q){q.add=function(s){s=s.split(" ");for(var r in s){q[s[r]]=q.mm(s[r])}}});k.mm=function(p){return"mm-"+p};k.add("menu ismenu panel list subtitle selected label spacer current highest hidden page blocker modal background opened opening subopened subopen fullsubopen subclose");k.umm=function(p){if(p.slice(0,3)=="mm-"){p=p.slice(3)}return p};i.mm=function(p){return"mm-"+p};i.add("parent style");g.mm=function(p){return p+".mm"};g.add("toggle open opening opened close closing closed update setPage setSelected transitionend webkitTransitionEnd mousedown touchstart mouseup touchend scroll touchmove click keydown keyup resize");l.$wndw.on(g.keydown,function(p){if(l.$html.hasClass(k.opened)){if(p.keyCode==9){p.preventDefault();return false}}});var o=0;l.$wndw.on(g.resize,function(r,q){if(q||l.$html.hasClass(k.opened)){var p=l.$wndw.height();if(q||p!=o){o=p;l.$page.css("minHeight",p)}}});e[d]._c=k;e[d]._d=i;e[d]._e=g;e[d].glbl=l}function f(r,q){if(r.hasClass(k.current)){return false}var p=e("."+k.panel,q),o=p.filter("."+k.current);p.removeClass(k.highest).removeClass(k.current).not(r).not(o).addClass(k.hidden);if(r.hasClass(k.opened)){o.addClass(k.highest).removeClass(k.opened).removeClass(k.subopened)}else{r.addClass(k.highest);o.addClass(k.subopened)}r.removeClass(k.hidden).removeClass(k.subopened).addClass(k.current).addClass(k.opened);return"open"}function a(o,q,r){var p=false,s=function(){if(!p){q.call(o[0])}p=true};o.one(g.transitionend,s);o.one(g.webkitTransitionEnd,s);setTimeout(s,r*1.1)}})(jQuery);